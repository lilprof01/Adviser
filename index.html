<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />

    <title>Frontend Mentor | Advice generator app</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
    <style>
      body {
        background-image: url(./Anime\ wallpaper/1334857.png);
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
        transition: opacity 0.8s ease, background-image 0.8s ease;
      }

      .fade-out {
        opacity: 7;
      }

      .attribution {
        position: fixed;
        bottom: 5%;
        left: 50%;
        transform: translateX(-50%);
        font-size: 11px;
        text-align: center;
        color: white;
      }
      .attribution a {
        color: hsl(228, 45%, 44%);
      }
      .advice {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 50px;
        height: 200px;
        width: 400px;
        margin: 0 auto;
        background-color: hsla(218, 23%, 16%, 0.792);
        display: flex;
        flex-direction: column;
        justify-content: start;
        align-items: center;
        text-align: center;
        gap: 20px;
        text-wrap: wrap;
      }

      .text-container {
        width: 80%;
        color: white;
        font-size: larger;
        font-weight: 600;
      }

      .divider2 {
        display: none;
      }

      @media (max-width: 768px) {
        .advice {
          width: 200px;
          height: 250px;
        }

        .divider1 {
          display: none;
        }

        .divider2 {
          display: block;
        }
      }

      h3 {
        color: hsl(150, 100%, 66%);
      }

      button {
        position: absolute;
        bottom: -22px;
        border: none;
        background-color: hsl(150, 100%, 66%);
        padding: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        cursor: pointer;
      }

      button:hover{
        box-shadow: 0px 0px 5px 2px hsl(150, 100%, 66%);
      }

      button:active{
        box-shadow: 0px 0px 5px 2px hsl(150, 100%, 66%);
      }
    </style>
  </head>
  <body>
    <div class="advice">
      <h3 id="adviceId">Advice Generator</h3>
      <div id="adviceText" class="text-container">
        Roll the Dice and win yourself a piece of advice
      </div>
      <svg
        width="444"
        height="16"
        xmlns="http://www.w3.org/2000/svg"
        class="divider1"
      >
        <g fill="none" fill-rule="evenodd">
          <path fill="#4F5D74" d="M0 8h196v1H0zM248 8h196v1H248z" />
          <g transform="translate(212)" fill="#CEE3E9">
            <rect width="6" height="16" rx="3" />
            <rect x="14" width="6" height="16" rx="3" />
          </g>
        </g>
      </svg>

      <svg
        width="295"
        height="16"
        xmlns="http://www.w3.org/2000/svg"
        class="divider2"
      >
        <g fill="none" fill-rule="evenodd">
          <path fill="#4F5D74" d="M0 8h122v1H0zM173 8h122v1H173z" />
          <g transform="translate(138)" fill="#CEE3E9">
            <rect width="6" height="16" rx="3" />
            <rect x="14" width="6" height="16" rx="3" />
          </g>
        </g>
      </svg>

      <button id="advice">
        <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M20 0H4a4.005 4.005 0 0 0-4 4v16a4.005 4.005 0 0 0 4 4h16a4.005 4.005 0 0 0 4-4V4a4.005 4.005 0 0 0-4-4ZM7.5 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm0-9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm4.5 4.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm4.5 4.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm0-9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"
            fill="#202733"
          />
        </svg>
      </button>
    </div>

    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by <a href="#">Aniyajuwon Pelumi</a>.
    </div>

    <script>
      const bg = [
        "./Anime\\ wallpaper/144565.jpg",
        "./Anime\\ wallpaper/1035968.jpg",
        "./Anime\\ wallpaper/1054250.png",
        "./Anime\\ wallpaper/1153480.jpg",
        "./Anime\\ wallpaper/1283140.png",
        "./Anime\\ wallpaper/1300581.png",
        "./Anime\\ wallpaper/1321481.png",
        "./Anime\\ wallpaper/1325724.png",
        "./Anime\\ wallpaper/1328396.png",
        "./Anime\\ wallpaper/1329915.jpeg",
        "./Anime\\ wallpaper/1334857.png",
        "./Anime\\ wallpaper/1337441.png",
        "./Anime\\ wallpaper/1337465.png",
        "./Anime\\ wallpaper/1341149.png",
        "./Anime\\ wallpaper/1343746.png",
        "./Anime\\ wallpaper/1343747.png",
        "./Anime\\ wallpaper/1347284.png",
        "./Anime\\ wallpaper/1351513.jpeg",
        "./Anime\\ wallpaper/1371405.jpeg",
        "./Anime\\ wallpaper/1375864.jpg",
      ];
      const button = document.getElementById("advice");
      const adviceText = document.getElementById("adviceText");
      const Id = document.getElementById("adviceId");

      button.addEventListener("click", async () => {
        try {
          console.log("fetching advice");
          document.body.classList.add("fade-out");

          // Wait for the fade-out animation to complete (800ms)
          setTimeout(async () => {
            const randomIndex = Math.floor(Math.random() * bg.length);
            document.body.style.backgroundImage = `url(${bg[randomIndex]})`;

            const response = await fetch("https://api.adviceslip.com/advice");
            const data = await response.json();

            adviceText.textContent = `"${data.slip.advice}"`;
            Id.textContent = `Advice #${data.slip.id}`;

            // Fade back in after background is updated
            document.body.classList.remove("fade-out");
          }, 800);
        } catch (error) {
          console.log("Error fetching data", error);
        }
      });
    </script>
  </body>
</html>
